import { Meta } from '@storybook/blocks';

<Meta title="Design System/Accessibility" />

# Accessibility Standards

The Your Town Finance component library is built with accessibility as a core principle. All components meet WCAG 2.1 AA standards to ensure inclusive experiences for users with disabilities in financial applications.

## Accessibility Features

### Color and Contrast
- **4.5:1 contrast ratio** for normal text against backgrounds
- **3:1 contrast ratio** for large text (18pt+ or 14pt+ bold)
- **3:1 contrast ratio** for UI components and graphical elements
- Color is never the only means of conveying information

### Keyboard Navigation
- All interactive elements are keyboard accessible
- Logical tab order follows visual layout
- Focus indicators are clearly visible
- Escape key closes modals and overlays
- Arrow keys navigate through related elements

### Screen Reader Support
- Semantic HTML elements used throughout
- ARIA labels and descriptions for complex components
- Live regions announce dynamic content changes
- Form labels properly associated with inputs
- Error messages announced to assistive technology

### Focus Management
- Focus trap in modal dialogs
- Focus restoration when closing overlays
- Skip links for main content navigation
- Clear focus indicators with sufficient contrast

## Component Accessibility

### Buttons
```html
<!-- Accessible button with proper labeling -->
<button 
  type="button"
  aria-label="Apply for personal loan"
  aria-describedby="loan-help-text"
>
  Apply Now
</button>
```

### Form Controls
```html
<!-- Accessible form field with validation -->
<label for="loan-amount">
  Loan Amount *
  <span class="sr-only">(Required field)</span>
</label>
<input 
  id="loan-amount"
  type="number"
  aria-required="true"
  aria-invalid="false"
  aria-describedby="amount-help amount-error"
/>
<div id="amount-help">Enter amount between $1,000 - $100,000</div>
<div id="amount-error" role="alert" aria-live="polite"></div>
```

### Tooltips and Help
```html
<!-- Accessible tooltip trigger -->
<button 
  type="button"
  aria-label="Get help about APR"
  aria-expanded="false"
  aria-describedby="apr-tooltip"
  data-tooltip-trigger
>
  <i class="fas fa-question-circle" aria-hidden="true"></i>
</button>
<div 
  id="apr-tooltip" 
  role="tooltip"
  aria-hidden="true"
>
  APR includes both interest rate and fees
</div>
```

### Modal Dialogs
```html
<!-- Accessible modal dialog -->
<div 
  role="dialog"
  aria-modal="true"
  aria-labelledby="dialog-title"
  aria-describedby="dialog-content"
>
  <h2 id="dialog-title">Loan Application Confirmation</h2>
  <div id="dialog-content">
    Please review your loan details before submitting.
  </div>
</div>
```

## Financial Application Context

### Loan Status Indicators
- Status changes announced to screen readers
- Visual and text indicators for approval/rejection
- Clear error messages for failed applications

### Financial Data Tables
- Sortable columns with keyboard navigation
- Row and column headers properly associated
- Summary information for complex financial data

### Progress Indicators
- Current step announced to screen readers
- Progress percentage available to assistive technology
- Clear navigation between application steps

## Testing Guidelines

### Automated Testing
- Use axe-core for automated accessibility scanning
- Lighthouse accessibility audits in CI/CD pipeline
- ESLint accessibility rules enforced

### Manual Testing
- Keyboard-only navigation testing
- Screen reader testing with NVDA/JAWS/VoiceOver
- High contrast mode compatibility
- Zoom testing up to 200% magnification

### Browser Compatibility
- Modern browsers with assistive technology support
- Mobile screen reader compatibility
- Voice control software compatibility

## Implementation Standards

### HTML Semantics
```html
<!-- Use semantic HTML structure -->
<main>
  <header>
    <h1>Personal Loan Application</h1>
  </header>
  
  <section aria-labelledby="personal-info">
    <h2 id="personal-info">Personal Information</h2>
    <form>
      <!-- Form content -->
    </form>
  </section>
  
  <aside aria-label="Financial education resources">
    <!-- Help content -->
  </aside>
</main>
```

### Error Handling
```html
<!-- Accessible error messaging -->
<div role="alert" aria-live="assertive">
  <h3>Application Error</h3>
  <p>Please correct the following errors:</p>
  <ul>
    <li><a href="#email-field">Email address is required</a></li>
    <li><a href="#income-field">Annual income must be a positive number</a></li>
  </ul>
</div>
```

### Loading States
```html
<!-- Accessible loading indicator -->
<div 
  role="status" 
  aria-live="polite" 
  aria-label="Processing your application"
>
  <div aria-hidden="true">
    <!-- Visual spinner -->
  </div>
  <span class="sr-only">Processing your application, please wait...</span>
</div>
```

## Screen Reader Classes

```css
/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Focus visible improvements */
.focus-visible {
  outline: 2px solid rgb(56, 96, 190);
  outline-offset: 2px;
}
```

## Compliance Checklist

### WCAG 2.1 AA Requirements
- [ ] Perceivable: Content is presentable without loss of meaning
- [ ] Operable: Interface components are operable by all users
- [ ] Understandable: Information and UI operation is understandable
- [ ] Robust: Content can be interpreted by assistive technologies

### Financial Services Considerations
- [ ] Multi-language support for diverse customer base
- [ ] Clear error recovery for financial transactions
- [ ] Timeout warnings for secure sessions
- [ ] Alternative formats for financial documents

### Legal Compliance
- [ ] Section 508 compliance for government accessibility
- [ ] ADA compliance for business accessibility
- [ ] State accessibility laws compliance

## Resources

### Testing Tools
- **axe DevTools** - Browser extension for accessibility testing
- **WAVE** - Web accessibility evaluation tool
- **Lighthouse** - Automated accessibility auditing
- **Color Contrast Analyzers** - Ensure sufficient contrast ratios

### Assistive Technology
- **NVDA** - Free Windows screen reader
- **JAWS** - Popular Windows screen reader
- **VoiceOver** - Built-in macOS/iOS screen reader
- **TalkBack** - Built-in Android screen reader

The accessibility standards ensure that Your Town Finance's digital experiences are inclusive and compliant with legal requirements while providing excellent usability for all customers.