import{k as r,p as g,l as i,v as c,J as b,O as v,F as f,x as m,s as y,z as n,K as w,q as x}from"./vue.esm-bundler-BOts1VAj.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const p={name:"MTable",props:{data:{type:Array,required:!0},columns:{type:Array,required:!0},title:String,subtitle:String,selectable:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!0},showFilters:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},showActions:{type:Boolean,default:!1},showExport:{type:Boolean,default:!1},pageSize:{type:Number,default:10},actions:{type:Array,default:()=>[]},filterOptions:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},rowClickable:{type:Boolean,default:!1},emptyMessage:String,responsive:{type:Boolean,default:!0}},emits:["row-click","action-click","selection-change","sort","filter"],data(){return{searchQuery:"",sortColumn:null,sortDirection:"asc",currentPage:1,selectedRows:[],activeFilters:{}}},computed:{containerClasses(){return["w-full",{"max-w-full overflow-hidden":this.responsive}]},visibleColumns(){return this.columns.filter(e=>e.visible!==!1)},totalColumns(){let e=this.visibleColumns.length;return this.selectable&&e++,this.showActions&&e++,e},filteredData(){let e=[...this.data];if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter(s=>this.visibleColumns.some(o=>{const u=this.getValue(s,o.key);return String(u).toLowerCase().includes(t)}))}return this.hasActiveFilters&&(e=e.filter(t=>Object.entries(this.activeFilters).every(([s,o])=>o?this.getValue(t,s)===o:!0))),this.sortColumn&&e.sort((t,s)=>{const o=this.getValue(t,this.sortColumn),u=this.getValue(s,this.sortColumn);let l=0;return o<u&&(l=-1),o>u&&(l=1),this.sortDirection==="desc"?-l:l}),e},totalPages(){return Math.ceil(this.filteredData.length/this.pageSize)},startIndex(){return(this.currentPage-1)*this.pageSize},endIndex(){return this.startIndex+this.pageSize},paginatedData(){return this.showPagination?this.filteredData.slice(this.startIndex,this.endIndex):this.filteredData},visiblePages(){const t=[],s=[];for(let o=Math.max(2,this.currentPage-2);o<=Math.min(this.totalPages-1,this.currentPage+2);o++)t.push(o);return this.currentPage-2>2?s.push(1,"..."):s.push(1),s.push(...t),this.currentPage+2<this.totalPages-1?s.push("...",this.totalPages):this.totalPages>1&&s.push(this.totalPages),s.filter(o=>o!=="...")},isAllSelected(){return this.paginatedData.length>0&&this.paginatedData.every(e=>this.isRowSelected(e))},isIndeterminate(){const e=this.paginatedData.filter(t=>this.isRowSelected(t)).length;return e>0&&e<this.paginatedData.length},hasActiveFilters(){return Object.values(this.activeFilters).some(e=>e)}},watch:{data(){this.currentPage=1,this.selectedRows=[]},selectedRows(){this.$emit("selection-change",this.selectedRows)}},methods:{getValue(e,t){return t.split(".").reduce((s,o)=>s==null?void 0:s[o],e)},getRowKey(e,t){return this.getValue(e,this.rowKey)||t},handleSort(e){this.sortColumn===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.$emit("sort",{column:e,direction:this.sortDirection})},handleRowClick(e,t){this.rowClickable&&this.$emit("row-click",{row:e,index:t})},handleAction(e,t,s){this.$emit("action-click",{action:e.key,row:t,index:s})},isRowSelected(e){const t=this.getRowKey(e);return this.selectedRows.some(s=>this.getRowKey(s)===t)},toggleRowSelection(e){const t=this.getRowKey(e),s=this.selectedRows.findIndex(o=>this.getRowKey(o)===t);s>-1?this.selectedRows.splice(s,1):this.selectedRows.push(e)},toggleSelectAll(){this.isAllSelected?this.paginatedData.forEach(e=>{const t=this.getRowKey(e),s=this.selectedRows.findIndex(o=>this.getRowKey(o)===t);s>-1&&this.selectedRows.splice(s,1)}):this.paginatedData.forEach(e=>{this.isRowSelected(e)||this.selectedRows.push(e)})},clearSelection(){this.selectedRows=[]},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},applyFilters(){this.currentPage=1,this.$emit("filter",this.activeFilters)},clearFilters(){this.activeFilters={},this.applyFilters()},exportData(){const e=this.generateCSV(),t=new Blob([e],{type:"text/csv"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`table-export-${Date.now()}.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},generateCSV(){const e=this.visibleColumns.map(s=>s.label),t=this.filteredData.map(s=>this.visibleColumns.map(o=>{const u=this.getValue(s,o.key);return`"${String(u).replace(/"/g,'""')}"`}));return[e.join(","),...t.map(s=>s.join(","))].join(`
`)},formatCurrency(e){return typeof e!="number"?e:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},formatDate(e,t="short"){if(!e)return"";const s=new Date(e);return new Intl.DateTimeFormat("en-US",{dateStyle:t}).format(s)},formatNumber(e){return typeof e!="number"?e:e.toLocaleString()},getStatusClass(e){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800"}[e==null?void 0:e.toLowerCase()]||"bg-gray-100 text-gray-800"}}},_={key:0,class:"table-header mb-4"},C={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},S={key:0,class:"text-lg font-semibold text-gray-900"},V={key:1,class:"text-sm text-gray-600"},R={class:"flex flex-col sm:flex-row gap-3"},D={key:0,class:"relative"},P={key:0,class:"mt-4 flex flex-wrap gap-2"},F=["onUpdate:modelValue"],M={value:""},A=["value"],B={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},L={class:"overflow-x-auto"},I={class:"min-w-full divide-y divide-gray-300"},z={class:"bg-gray-50"},K={key:0,class:"relative w-12 px-6 sm:w-16 sm:px-8"},T=["checked","indeterminate"],j=["onClick"],N={class:"flex items-center space-x-1"},U={key:1,class:"relative px-6 py-3"},O={class:"bg-white divide-y divide-gray-200"},E=["onClick"],q={key:0,class:"relative w-12 px-6 sm:w-16 sm:px-8"},H=["checked","onChange"],Q=["innerHTML"],G={key:2,class:"font-medium text-gray-900"},J={key:3,class:"text-gray-500"},W={key:4,class:"font-medium text-gray-900"},X={key:5},Y={key:0,class:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},Z={key:1,class:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},$={key:6,class:"text-gray-900"},ee={key:1,class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},te={class:"flex items-center justify-end space-x-2"},se=["onClick"],le={key:0},ae=["colspan"],re={class:"text-gray-500"},ne={class:"text-sm"},ie={key:1,class:"mt-4 flex items-center justify-between"},oe={class:"flex items-center text-sm text-gray-700"},de={class:"flex items-center space-x-2"},ue=["disabled"],ce={class:"flex space-x-1"},he=["onClick"],ge=["disabled"],ye={key:2,class:"mt-4 p-3 bg-blue-50 rounded-lg"},fe={class:"flex items-center justify-between"},me={class:"text-sm text-blue-700"};function be(e,t,s,o,u,l){return n(),r("div",{class:y(["m-table",l.containerClasses])},[s.title||s.subtitle||s.showSearch||s.showFilters?(n(),r("div",_,[i("div",C,[i("div",null,[s.title?(n(),r("h3",S,c(s.title),1)):g("",!0),s.subtitle?(n(),r("p",V,c(s.subtitle),1)):g("",!0)]),i("div",R,[s.showSearch?(n(),r("div",D,[b(i("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>u.searchQuery=a),type:"text",placeholder:"Search...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[v,u.searchQuery]]),t[9]||(t[9]=i("svg",{class:"w-4 h-4 absolute left-3 top-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])):g("",!0),s.showExport?(n(),r("button",{key:1,onClick:t[1]||(t[1]=(...a)=>l.exportData&&l.exportData(...a)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500"}," Export ")):g("",!0)])]),s.showFilters&&s.filterOptions.length>0?(n(),r("div",P,[(n(!0),r(f,null,m(s.filterOptions,a=>b((n(),r("select",{key:a.key,"onUpdate:modelValue":h=>u.activeFilters[a.key]=h,class:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onChange:t[2]||(t[2]=(...h)=>l.applyFilters&&l.applyFilters(...h))},[i("option",M,c(a.label),1),(n(!0),r(f,null,m(a.options,h=>(n(),r("option",{key:h.value,value:h.value},c(h.label),9,A))),128))],40,F)),[[w,u.activeFilters[a.key]]])),128)),l.hasActiveFilters?(n(),r("button",{key:0,onClick:t[3]||(t[3]=(...a)=>l.clearFilters&&l.clearFilters(...a)),class:"px-3 py-2 text-xs font-medium text-gray-500 bg-gray-100 rounded-lg hover:bg-gray-200"}," Clear Filters ")):g("",!0)])):g("",!0)])):g("",!0),i("div",B,[i("div",L,[i("table",I,[i("thead",z,[i("tr",null,[s.selectable?(n(),r("th",K,[i("input",{type:"checkbox",checked:l.isAllSelected,indeterminate:l.isIndeterminate,onChange:t[4]||(t[4]=(...a)=>l.toggleSelectAll&&l.toggleSelectAll(...a)),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,40,T)])):g("",!0),(n(!0),r(f,null,m(l.visibleColumns,a=>(n(),r("th",{key:a.key,class:y(["px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",a.sortable?"cursor-pointer hover:bg-gray-100":"",a.align==="center"?"text-center":"",a.align==="right"?"text-right":""]),onClick:h=>a.sortable&&l.handleSort(a.key)},[i("div",N,[i("span",null,c(a.label),1),a.sortable?(n(),r("svg",{key:0,class:y(["w-4 h-4 text-gray-400",{"text-blue-600":u.sortColumn===a.key,"rotate-180":u.sortColumn===a.key&&u.sortDirection==="desc"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t[10]||(t[10]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 10l5 5 5-5z"},null,-1)]),2)):g("",!0)])],10,j))),128)),s.showActions?(n(),r("th",U,t[11]||(t[11]=[i("span",{class:"sr-only"},"Actions",-1)]))):g("",!0)])]),i("tbody",O,[(n(!0),r(f,null,m(l.paginatedData,(a,h)=>(n(),r("tr",{key:l.getRowKey(a,h),class:y(["hover:bg-gray-50 transition-colors",l.isRowSelected(a)?"bg-blue-50":"",s.rowClickable?"cursor-pointer":""]),onClick:d=>l.handleRowClick(a,h)},[s.selectable?(n(),r("td",q,[i("input",{type:"checkbox",checked:l.isRowSelected(a),onChange:d=>l.toggleRowSelection(a),onClick:t[5]||(t[5]=x(()=>{},["stop"])),class:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,40,H)])):g("",!0),(n(!0),r(f,null,m(l.visibleColumns,d=>(n(),r("td",{key:`${l.getRowKey(a,h)}-${d.key}`,class:y(["px-6 py-4 whitespace-nowrap text-sm",d.align==="center"?"text-center":"",d.align==="right"?"text-right":"",d.className||""])},[d.render?(n(),r("div",{key:0,innerHTML:d.render(l.getValue(a,d.key),a,h)},null,8,Q)):d.type==="status"?(n(),r("span",{key:1,class:y(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",l.getStatusClass(l.getValue(a,d.key))])},c(l.getValue(a,d.key)),3)):d.type==="currency"?(n(),r("span",G,c(l.formatCurrency(l.getValue(a,d.key))),1)):d.type==="date"?(n(),r("span",J,c(l.formatDate(l.getValue(a,d.key),d.dateFormat)),1)):d.type==="number"?(n(),r("span",W,c(l.formatNumber(l.getValue(a,d.key))),1)):d.type==="boolean"?(n(),r("span",X,[l.getValue(a,d.key)?(n(),r("svg",Y,t[12]||(t[12]=[i("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):(n(),r("svg",Z,t[13]||(t[13]=[i("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])))])):(n(),r("span",$,c(l.getValue(a,d.key)),1))],2))),128)),s.showActions?(n(),r("td",ee,[i("div",te,[(n(!0),r(f,null,m(s.actions,d=>(n(),r("button",{key:d.key,class:y(["inline-flex items-center px-2.5 py-1.5 text-xs font-medium rounded border focus:outline-none focus:ring-2 transition-colors",d.variant==="danger"?"text-red-700 bg-red-50 border-red-300 hover:bg-red-100 focus:ring-red-500":"text-blue-700 bg-blue-50 border-blue-300 hover:bg-blue-100 focus:ring-blue-500"]),onClick:x(xe=>l.handleAction(d,a,h),["stop"])},c(d.label),11,se))),128))])])):g("",!0)],10,E))),128)),l.paginatedData.length===0?(n(),r("tr",le,[i("td",{colspan:l.totalColumns,class:"px-6 py-12 text-center"},[i("div",re,[t[14]||(t[14]=i("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m0 0V9a2 2 0 012-2h2m0 0V6a2 2 0 012-2h3a2 2 0 012 2v1M9 7h6"})],-1)),i("p",ne,c(s.emptyMessage||"No data available"),1)])],8,ae)])):g("",!0)])])])]),s.showPagination&&l.totalPages>1?(n(),r("div",ie,[i("div",oe,[i("span",null," Showing "+c(l.startIndex+1)+" to "+c(Math.min(l.endIndex,l.filteredData.length))+" of "+c(l.filteredData.length)+" results ",1)]),i("div",de,[i("button",{disabled:u.currentPage===1,onClick:t[6]||(t[6]=a=>l.goToPage(u.currentPage-1)),class:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,ue),i("div",ce,[(n(!0),r(f,null,m(l.visiblePages,a=>(n(),r("button",{key:a,class:y(["px-3 py-2 text-sm font-medium border rounded-md",a===u.currentPage?"text-blue-600 bg-blue-50 border-blue-500":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50"]),onClick:h=>l.goToPage(a)},c(a),11,he))),128))]),i("button",{disabled:u.currentPage===l.totalPages,onClick:t[7]||(t[7]=a=>l.goToPage(u.currentPage+1)),class:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,ge)])])):g("",!0),s.selectable&&u.selectedRows.length>0?(n(),r("div",ye,[i("div",fe,[i("span",me,c(u.selectedRows.length)+" item"+c(u.selectedRows.length===1?"":"s")+" selected ",1),i("button",{onClick:t[8]||(t[8]=(...a)=>l.clearSelection&&l.clearSelection(...a)),class:"text-sm font-medium text-blue-600 hover:text-blue-500"}," Clear selection ")])])):g("",!0)],2)}const we=k(p,[["render",be],["__scopeId","data-v-7b431b22"]]);p.__docgenInfo={displayName:"MTable",exportName:"default",description:"",tags:{},props:[{name:"data",type:{name:"array"},required:!0},{name:"columns",type:{name:"array"},required:!0},{name:"title",type:{name:"string"}},{name:"subtitle",type:{name:"string"}},{name:"selectable",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showSearch",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showFilters",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showPagination",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showActions",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showExport",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"pageSize",type:{name:"number"},defaultValue:{func:!1,value:"10"}},{name:"actions",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"filterOptions",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"rowKey",type:{name:"string"},defaultValue:{func:!1,value:"'id'"}},{name:"rowClickable",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"emptyMessage",type:{name:"string"}},{name:"responsive",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"row-click",type:{names:["undefined"]}},{name:"action-click",type:{names:["undefined"]}},{name:"selection-change",type:{names:["undefined"]}},{name:"sort",type:{names:["undefined"]}},{name:"filter",type:{names:["undefined"]}}],sourceFiles:["C:/Users/bradl/OneDrive/Documents/GitHub/bmc-navigator-component/src/components/tables/MTable.vue"]};export{we as M};
