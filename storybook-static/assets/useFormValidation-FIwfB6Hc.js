import{a as T,r as i,c as a}from"./vue.esm-bundler-BOts1VAj.js";function I(p={}){const d=T({...p}),s=i({}),u=i({}),c=i(!1),h=i(!1),v=i({}),g=i({}),F=e=>{Object.assign(v.value,e)},b=e=>{Object.assign(g.value,e)},O={required:(e,r="This field is required")=>Array.isArray(e)?e.length>0||r:e!=null&&e!==""||r,email:(e,r="Please enter a valid email address")=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||r:!0,phone:(e,r="Please enter a valid phone number")=>e?/^[\+]?[1-9][\d]{0,15}$/.test(e.replace(/\D/g,""))||r:!0,ssn:(e,r="Please enter a valid SSN")=>e?/^\d{3}-?\d{2}-?\d{4}$/.test(e)||r:!0,minLength:e=>(r,t=`Minimum ${e} characters required`)=>r?r.length>=e||t:!0,maxLength:e=>(r,t=`Maximum ${e} characters allowed`)=>r?r.length<=e||t:!0,minValue:e=>(r,t=`Value must be at least ${e}`)=>r==null||r===""?!0:Number(r)>=e||t,maxValue:e=>(r,t=`Value must be at most ${e}`)=>r==null||r===""?!0:Number(r)<=e||t,pattern:(e,r="Invalid format")=>t=>t?e.test(t)||r:!0,custom:e=>e},f=async e=>{const r=v.value[e];if(!r)return!0;const t=V(e),n=[];for(const l of r){const o=await l(t);if(o!==!0){n.push(o);break}}if(n.length===0&&g.value[e])try{const l=await g.value[e](t);l!==!0&&n.push(l)}catch{n.push("Validation error occurred")}return n.length>0?(s.value[e]=n[0],!1):(delete s.value[e],!0)},y=async()=>{h.value=!0;const e=Object.keys(v.value).map(f),r=await Promise.all(e);return h.value=!1,r.every(t=>t===!0)},V=e=>e.split(".").reduce((r,t)=>r==null?void 0:r[t],d),R=(e,r)=>{const t=e.split("."),n=t.pop(),l=t.reduce((o,m)=>(o[m]||(o[m]={}),o[m]),d);l[n]=r,u.value[e]=!0,u.value[e]&&f(e)},x=e=>{u.value[e]=!0,f(e)},E=()=>{Object.assign(d,p),s.value={},u.value={},c.value=!1},$=()=>{s.value={}},k=e=>{delete s.value[e]},w=e=>!!s.value[e],S=e=>s.value[e]||"",j=e=>!!u.value[e],q=a(()=>Object.keys(s.value).length===0),A=a(()=>Object.keys(s.value).length>0),L=a(()=>Object.keys(u.value)),M=a(()=>Object.keys(s.value)),P=async e=>{c.value=!0;try{if(Object.keys(v.value).forEach(n=>{u.value[n]=!0}),!await y())return c.value=!1,{success:!1,errors:s.value};const t=await e(d);return c.value=!1,{success:!0,data:t}}catch(r){return c.value=!1,{success:!1,error:r.message}}};return{formData:d,errors:a(()=>s.value),touched:a(()=>u.value),isSubmitting:a(()=>c.value),isValidating:a(()=>h.value),isValid:q,hasErrors:A,touchedFields:L,errorFields:M,setValidationRules:F,setAsyncValidators:b,validateField:f,validateForm:y,getFieldValue:V,setFieldValue:R,touchField:x,resetForm:E,clearErrors:$,clearFieldError:k,hasFieldError:w,getFieldError:S,isFieldTouched:j,handleSubmit:P,validators:O}}export{I as u};
