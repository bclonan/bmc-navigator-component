import{k as r,p as y,v as d,l as h,F as g,x as f,y as _,s as T,z as n}from"./vue.esm-bundler-BOts1VAj.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={name:"MChart",props:{type:{type:String,default:"line",validator:s=>["line","bar","pie"].includes(s)},data:{type:Array,required:!0},width:{type:Number,default:400},height:{type:Number,default:300},title:String,subtitle:String,colors:{type:Array,default:()=>["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#84cc16","#f97316"]},showGrid:{type:Boolean,default:!0},showPoints:{type:Boolean,default:!0},showLabels:{type:Boolean,default:!0},showLegend:{type:Boolean,default:!1},strokeWidth:{type:Number,default:2},pointRadius:{type:Number,default:4},formatters:{type:Object,default:()=>({})},responsive:{type:Boolean,default:!0}},data(){return{padding:{top:20,right:20,bottom:40,left:60},gridSize:20,tooltip:{visible:!1,x:0,y:0,content:""}}},computed:{containerClasses(){return["w-full",{"max-w-full":this.responsive}]},chartWidth(){return this.width-this.padding.left-this.padding.right},chartHeight(){return this.height-this.padding.top-this.padding.bottom},chartData(){var s,l;return this.type==="pie"?this.data:((l=(s=this.dataSeries)==null?void 0:s[0])==null?void 0:l.data)||this.data},dataSeries(){var s;return Array.isArray(this.data)&&((s=this.data[0])!=null&&s.data)?this.data:[{data:this.data,label:"Data"}]},xExtent(){const s=this.dataSeries.flatMap(l=>l.data.map(t=>t.x));return[Math.min(...s),Math.max(...s)]},yExtent(){const s=this.dataSeries.flatMap(o=>o.data.map(e=>e.y)),l=Math.min(...s),t=Math.max(...s),c=(t-l)*.1;return[l-c,t+c]},xTicks(){const[s,l]=this.xExtent,t=Math.min(8,this.chartData.length),c=(l-s)/(t-1);return Array.from({length:t},(o,e)=>({value:s+e*c,x:e*c/(l-s)*this.chartWidth}))},yTicks(){const[s,l]=this.yExtent,t=6,c=(l-s)/(t-1);return Array.from({length:t},(o,e)=>({value:s+e*c,y:this.chartHeight-e*c/(l-s)*this.chartHeight}))},barWidth(){return this.chartWidth/this.chartData.length*.8},pieSlices(){if(this.type!=="pie")return[];const s=this.chartData.reduce((c,o)=>c+o.y,0);let l=-Math.PI/2;const t=Math.min(this.width,this.height)/2-20;return this.chartData.map((c,o)=>{const e=c.y/s*100,x=c.y/s*2*Math.PI,a=l,i=l+x,u=Math.cos(a)*t,b=Math.sin(a)*t,m=Math.cos(i)*t,M=Math.sin(i)*t,p=x>Math.PI?1:0,V=["M",0,0,"L",u,b,"A",t,t,0,p,1,m,M,"Z"].join(" "),v=a+x/2,w=t*.7,S=Math.cos(v)*w,H=Math.sin(v)*w;return l=i,{path:V,percentage:e,labelX:S,labelY:H,color:c.color||this.colors[o%this.colors.length],data:c}})}},methods:{getX(s){const[l,t]=this.xExtent;return(s-l)/(t-l)*this.chartWidth},getY(s){const[l,t]=this.yExtent;return this.chartHeight-(s-l)/(t-l)*this.chartHeight},getBarX(s){const l=this.chartWidth/this.chartData.length;return s*l+(l-this.barWidth)/2},generateLinePath(s){return s.map((l,t)=>{const c=this.getX(l.x),o=this.getY(l.y);return`${t===0?"M":"L"} ${c} ${o}`}).join(" ")},formatValue(s,l){const t=this.formatters[l];return t?t(s):typeof s=="number"?l==="y"&&Math.abs(s)>=1e3?`$${(s/1e3).toFixed(1)}K`:s.toLocaleString():s},showTooltip(s,l,t){const c=s.target.getBoundingClientRect(),o=this.$el.getBoundingClientRect();this.tooltip={visible:!0,x:c.left-o.left+10,y:c.top-o.top-10,content:t?`${t.label}: ${this.formatValue(l.y,"y")}`:`${l.label||l.x}: ${this.formatValue(l.y,"y")}`}},hideTooltip(){this.tooltip.visible=!1}}},L={key:0,class:"chart-header mb-4"},W={key:0,class:"text-lg font-semibold text-gray-900"},B={key:1,class:"text-sm text-gray-600"},D={key:1,class:"relative"},A=["width","height"],z={key:0,class:"grid-lines"},X=["width","height"],N=["d"],P=["transform"],Y={class:"y-axis"},E=["y2"],F=["y1","y2"],R=["y"],j={class:"x-axis"},G=["y1","x2","y2"],O=["x1","y1","x2","y2"],U=["x","y"],q=["d","stroke","stroke-width"],I={key:0,class:"data-points"},K=["cx","cy","r","fill","onMouseenter"],Z={key:2,class:"relative"},J=["width","height"],Q=["transform"],$={class:"y-axis"},tt=["y2"],et=["y1","y2"],at=["y"],lt={class:"x-axis"},st=["y1","x2","y2"],rt={class:"bars"},nt=["x","y","width","height","fill","onMouseenter"],it=["x","y"],ot={key:3,class:"relative flex items-center justify-center"},ht=["width","height"],ct=["transform"],ut=["d","fill","onMouseenter"],dt=["x","y"],yt={key:0,class:"ml-6 space-y-2"},gt={class:"text-sm text-gray-700"},ft={class:"text-sm font-medium text-gray-900"},xt={key:4,class:"mt-4 flex flex-wrap gap-4"},mt={class:"text-sm text-gray-700"};function _t(s,l,t,c,o,e){var x;return n(),r("div",{class:T(["m-chart",e.containerClasses])},[t.title||t.subtitle?(n(),r("div",L,[t.title?(n(),r("h3",W,d(t.title),1)):y("",!0),t.subtitle?(n(),r("p",B,d(t.subtitle),1)):y("",!0)])):y("",!0),t.type==="line"?(n(),r("div",D,[(n(),r("svg",{width:t.width,height:t.height,class:"overflow-visible"},[t.showGrid?(n(),r("g",z,[h("defs",null,[h("pattern",{id:"grid",width:o.gridSize,height:o.gridSize,patternUnits:"userSpaceOnUse"},[h("path",{d:`M ${o.gridSize} 0 L 0 0 0 ${o.gridSize}`,fill:"none",stroke:"#e5e7eb","stroke-width":"1"},null,8,N)],8,X)]),l[3]||(l[3]=h("rect",{width:"100%",height:"100%",fill:"url(#grid)"},null,-1))])):y("",!0),h("g",{transform:`translate(${o.padding.left}, ${o.padding.top})`},[h("g",Y,[h("line",{x1:0,y1:0,x2:0,y2:e.chartHeight,stroke:"#6b7280","stroke-width":"1"},null,8,E),(n(!0),r(g,null,f(e.yTicks,(a,i)=>(n(),r("g",{key:`y-${i}`,class:"tick"},[h("line",{x1:-5,y1:a.y,x2:0,y2:a.y,stroke:"#6b7280","stroke-width":"1"},null,8,F),h("text",{x:-10,y:a.y+4,"text-anchor":"end",class:"text-xs fill-gray-600"},d(e.formatValue(a.value,"y")),9,R)]))),128))]),h("g",j,[h("line",{x1:0,y1:e.chartHeight,x2:e.chartWidth,y2:e.chartHeight,stroke:"#6b7280","stroke-width":"1"},null,8,G),(n(!0),r(g,null,f(e.xTicks,(a,i)=>(n(),r("g",{key:`x-${i}`,class:"tick"},[h("line",{x1:a.x,y1:e.chartHeight,x2:a.x,y2:e.chartHeight+5,stroke:"#6b7280","stroke-width":"1"},null,8,O),h("text",{x:a.x,y:e.chartHeight+18,"text-anchor":"middle",class:"text-xs fill-gray-600"},d(e.formatValue(a.value,"x")),9,U)]))),128))]),(n(!0),r(g,null,f(e.dataSeries,(a,i)=>(n(),r("g",{key:`series-${i}`,class:"data-series"},[h("path",{d:e.generateLinePath(a.data),stroke:a.color||t.colors[i%t.colors.length],"stroke-width":t.strokeWidth,fill:"none",class:"transition-all duration-300"},null,8,q),t.showPoints?(n(),r("g",I,[(n(!0),r(g,null,f(a.data,(u,b)=>(n(),r("circle",{key:`point-${i}-${b}`,cx:e.getX(u.x),cy:e.getY(u.y),r:t.pointRadius,fill:a.color||t.colors[i%t.colors.length],class:"transition-all duration-200 hover:r-6 cursor-pointer",onMouseenter:m=>e.showTooltip(m,u,a),onMouseleave:l[0]||(l[0]=(...m)=>e.hideTooltip&&e.hideTooltip(...m))},null,40,K))),128))])):y("",!0)]))),128))],8,P)],8,A)),o.tooltip.visible?(n(),r("div",{key:0,class:"absolute z-10 bg-gray-900 text-white text-xs rounded px-2 py-1 pointer-events-none",style:_({left:o.tooltip.x+"px",top:o.tooltip.y+"px"})},d(o.tooltip.content),5)):y("",!0)])):t.type==="bar"?(n(),r("div",Z,[(n(),r("svg",{width:t.width,height:t.height,class:"overflow-visible"},[h("g",{transform:`translate(${o.padding.left}, ${o.padding.top})`},[h("g",$,[h("line",{x1:0,y1:0,x2:0,y2:e.chartHeight,stroke:"#6b7280","stroke-width":"1"},null,8,tt),(n(!0),r(g,null,f(e.yTicks,(a,i)=>(n(),r("g",{key:`y-${i}`,class:"tick"},[h("line",{x1:-5,y1:a.y,x2:0,y2:a.y,stroke:"#6b7280","stroke-width":"1"},null,8,et),h("text",{x:-10,y:a.y+4,"text-anchor":"end",class:"text-xs fill-gray-600"},d(e.formatValue(a.value,"y")),9,at)]))),128))]),h("g",lt,[h("line",{x1:0,y1:e.chartHeight,x2:e.chartWidth,y2:e.chartHeight,stroke:"#6b7280","stroke-width":"1"},null,8,st)]),h("g",rt,[(n(!0),r(g,null,f(e.chartData,(a,i)=>(n(),r("rect",{key:`bar-${i}`,x:e.getBarX(i),y:e.getY(a.y),width:e.barWidth,height:e.chartHeight-e.getY(a.y),fill:a.color||t.colors[i%t.colors.length],class:"transition-all duration-300 hover:opacity-80 cursor-pointer",onMouseenter:u=>e.showTooltip(u,a),onMouseleave:l[1]||(l[1]=(...u)=>e.hideTooltip&&e.hideTooltip(...u))},null,40,nt))),128)),(n(!0),r(g,null,f(e.chartData,(a,i)=>(n(),r("text",{key:`label-${i}`,x:e.getBarX(i)+e.barWidth/2,y:e.chartHeight+15,"text-anchor":"middle",class:"text-xs fill-gray-600"},d(e.formatValue(a.x,"x")),9,it))),128))])],8,Q)],8,J)),o.tooltip.visible?(n(),r("div",{key:0,class:"absolute z-10 bg-gray-900 text-white text-xs rounded px-2 py-1 pointer-events-none",style:_({left:o.tooltip.x+"px",top:o.tooltip.y+"px"})},d(o.tooltip.content),5)):y("",!0)])):t.type==="pie"?(n(),r("div",ot,[(n(),r("svg",{width:t.width,height:t.height,class:"overflow-visible"},[h("g",{transform:`translate(${t.width/2}, ${t.height/2})`},[(n(!0),r(g,null,f(e.pieSlices,(a,i)=>(n(),r("g",{key:`slice-${i}`,class:"pie-slice"},[h("path",{d:a.path,fill:a.color||t.colors[i%t.colors.length],class:"transition-all duration-300 hover:opacity-80 cursor-pointer",onMouseenter:u=>e.showTooltip(u,a.data),onMouseleave:l[2]||(l[2]=(...u)=>e.hideTooltip&&e.hideTooltip(...u))},null,40,ut),t.showLabels&&a.percentage>5?(n(),r("text",{key:0,x:a.labelX,y:a.labelY,"text-anchor":"middle",class:"text-xs fill-white font-medium"},d(a.percentage.toFixed(1))+"% ",9,dt)):y("",!0)]))),128))],8,ct)],8,ht)),t.showLegend?(n(),r("div",yt,[(n(!0),r(g,null,f(e.chartData,(a,i)=>(n(),r("div",{key:`legend-${i}`,class:"flex items-center space-x-2"},[h("div",{class:"w-3 h-3 rounded",style:_({backgroundColor:a.color||t.colors[i%t.colors.length]})},null,4),h("span",gt,d(a.label||a.x),1),h("span",ft,d(e.formatValue(a.y,"y")),1)]))),128))])):y("",!0)])):y("",!0),t.showLegend&&(t.type==="line"||t.type==="bar")&&((x=e.dataSeries)==null?void 0:x.length)>1?(n(),r("div",xt,[(n(!0),r(g,null,f(e.dataSeries,(a,i)=>(n(),r("div",{key:`legend-${i}`,class:"flex items-center space-x-2"},[h("div",{class:"w-3 h-3 rounded",style:_({backgroundColor:a.color||t.colors[i%t.colors.length]})},null,4),h("span",mt,d(a.label),1)]))),128))])):y("",!0)],2)}const wt=C(k,[["render",_t],["__scopeId","data-v-8ee3002b"]]);k.__docgenInfo={displayName:"MChart",exportName:"default",description:"",tags:{},props:[{name:"type",type:{name:"string"},defaultValue:{func:!1,value:"'line'"},values:["line","bar","pie"]},{name:"data",type:{name:"array"},required:!0},{name:"width",type:{name:"number"},defaultValue:{func:!1,value:"400"}},{name:"height",type:{name:"number"},defaultValue:{func:!1,value:"300"}},{name:"title",type:{name:"string"}},{name:"subtitle",type:{name:"string"}},{name:"colors",type:{name:"array"},defaultValue:{func:!1,value:`[\r
  '#3b82f6', '#ef4444', '#10b981', '#f59e0b',\r
  '#8b5cf6', '#06b6d4', '#84cc16', '#f97316'\r
]`}},{name:"showGrid",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showPoints",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showLabels",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showLegend",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"strokeWidth",type:{name:"number"},defaultValue:{func:!1,value:"2"}},{name:"pointRadius",type:{name:"number"},defaultValue:{func:!1,value:"4"}},{name:"formatters",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"responsive",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],sourceFiles:["C:/Users/bradl/OneDrive/Documents/GitHub/bmc-navigator-component/src/components/charts/MChart.vue"]};export{wt as M};
