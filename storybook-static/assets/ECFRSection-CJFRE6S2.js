import{d as b}from"./pinia-C5ekiB_t.js";import{k as r,p as l,l as d,s as n,q as M,F as g,v as o,x as f,Q as p,z as i,C as v}from"./vue.esm-bundler-BOts1VAj.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I=b("ecfr",{state:()=>({rootItems:[],currentPath:[],currentItem:null,expandedItems:new Set,metadataRegistry:new Map,metadataProcessors:new Map}),getters:{breadcrumbPath(){return this.currentPath},isItemExpanded(){return e=>this.expandedItems.has(e)},getItemMetadata(){return(e,s)=>{if(!this.metadataRegistry.has(e))return null;const t=this.metadataRegistry.get(e);return s&&typeof t=="object"?t[s]||null:t}},currentItemMetadata(){return e=>!this.currentItem||!this.currentItem.id?null:this.getItemMetadata(this.currentItem.id,e)},allMetadataProcessors(){return this.metadataProcessors}},actions:{setRootItems(e){this.rootItems=e,e.length>0&&!this.currentItem&&this.selectItem(e[0],0)},selectItem(e,s,t=[]){const m=[...t,{item:e,index:s}];this.currentPath=m,this.currentItem=e,e.children&&e.children.length>0&&this.expandItem(e.id)},navigateToPath(e){e.length>0&&(this.currentPath=e,this.currentItem=e[e.length-1].item)},expandItem(e){this.expandedItems.add(e)},collapseItem(e){this.expandedItems.delete(e)},toggleItemExpansion(e){this.expandedItems.has(e)?this.expandedItems.delete(e):this.expandedItems.add(e)},expandAll(){const e=s=>{for(const t of s)this.expandedItems.add(t.id),t.children&&e(t.children)};e(this.rootItems)},collapseAll(){this.expandedItems.clear()},registerMetadataProcessor(e,s){if(typeof s!="function"){console.error(`Metadata processor for '${e}' must be a function`);return}this.metadataProcessors.set(e,s)},unregisterMetadataProcessor(e){this.metadataProcessors.delete(e)},setItemMetadata(e,s,t){if(!e){console.error("Cannot set metadata: Item ID is required");return}this.metadataRegistry.has(e)||this.metadataRegistry.set(e,{});const m=this.metadataRegistry.get(e);t?m[t]=s:typeof s=="object"?Object.assign(m,s):console.error("Invalid metadata format: must be an object")},processItemMetadata(e,s){const t=this.getItemMetadata(e,s);if(!t)return null;if(!s){const m={};for(const[u,a]of Object.entries(t))if(this.metadataProcessors.has(u)){const h=this.metadataProcessors.get(u);m[u]=h(a,e)}else m[u]=a;return m}return this.metadataProcessors.has(s)?this.metadataProcessors.get(s)(t,e):t},removeItemMetadata(e,s){if(!this.metadataRegistry.has(e))return;if(!s){this.metadataRegistry.delete(e);return}const t=this.metadataRegistry.get(e);t&&t[s]&&delete t[s]}}}),y={name:"ECFRSection",props:{item:{type:Object,required:!0},index:{type:Number,required:!0},level:{type:Number,required:!0},parentPath:{type:Array,default:()=>[]},darkMode:{type:Boolean,default:!1},options:{type:Object,default:()=>({})}},data(){return{ecfrStore:I()}},computed:{defaultOptions(){return{display:{showTypeIcon:!0,showItemNumbers:!0,indentItems:!0,hideEmptyItems:!1,viewMode:"standard",showDescription:!1,showMetadataBadges:!1,itemSpacing:"medium",maxTitleLength:null},navigation:{preserveState:!0,scrollToSelected:!0,autoExpandParents:!0,autoCollapseOthers:!1}}},mergedOptions(){return{...this.defaultOptions,...this.options,display:{...this.defaultOptions.display,...this.options.display||{}},navigation:{...this.defaultOptions.navigation,...this.options.navigation||{}}}},hasChildren(){return this.item.children&&this.item.children.length>0},shouldHideItem(){return this.mergedOptions.display.hideEmptyItems&&!this.hasChildren&&!this.item.content},isExpanded(){return this.ecfrStore.isItemExpanded(this.item.id)},currentPath(){return[...this.parentPath,{item:this.item,index:this.index}]},isSelected(){var e;return((e=this.ecfrStore.currentItem)==null?void 0:e.id)===this.item.id},viewModeClasses(){const e=this.mergedOptions.display.viewMode;return e==="compact"?"compact-mode py-0.5":e==="detailed"?"detailed-mode py-2":e==="styleless"?"styleless-mode":"standard-mode py-1"},spacingClasses(){const e=this.mergedOptions.display.itemSpacing;return e==="tight"?"mb-0.5":e==="loose"?"mb-2":"mb-1"},isCompactMode(){return this.mergedOptions.display.viewMode==="compact"},isDetailedMode(){return this.mergedOptions.display.viewMode==="detailed"},displayTitle(){const e=this.mergedOptions.display.maxTitleLength;return!e||!this.item.title||this.item.title.length<=e?this.item.title:this.item.title.substring(0,e)+"..."},hasMetadata(){return!!this.ecfrStore.getItemMetadata(this.item.id)},metadataTypes(){const e=this.ecfrStore.getItemMetadata(this.item.id);return e?Object.keys(e):[]},contentPreview(){if(!this.item.content)return"";const e=this.item.content.replace(/<[^>]*>/g,""),s=150;return e.length<=s?e:e.substring(0,s)+"..."}},methods:{toggleExpand(e){e.stopPropagation(),this.ecfrStore.toggleItemExpansion(this.item.id)},handleSelect(){this.ecfrStore.selectItem(this.item,this.index,this.parentPath),this.hasChildren&&!this.isExpanded&&this.ecfrStore.expandItem(this.item.id),this.mergedOptions.navigation.autoCollapseOthers&&this.hasChildren&&this.collapseOthers(this.item.id),this.mergedOptions.navigation.scrollToSelected&&this.$nextTick(()=>{const e=document.querySelector(".ecfr-section .bg-blue-100, .ecfr-section .bg-blue-900");e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})})},collapseOthers(e){if(this.level===0&&this.item.id!==e){this.ecfrStore.collapseItem(this.item.id);return}const s=this.parentPath.length>0?this.parentPath[this.parentPath.length-1].item.children:this.ecfrStore.rootItems;s&&s.forEach(t=>{t.id!==e&&this.ecfrStore.collapseItem(t.id)})}}},w={key:1,class:"mr-2 h-5 w-5 flex-shrink-0"},V={class:"flex-1"},H={class:"flex items-baseline"},C={key:1,class:"mr-2"},O={key:1,class:"flex items-start"},P={class:"flex-1"},S={class:"flex items-baseline flex-wrap"},E={key:1,class:"mr-2"},L={key:2,class:"ml-2 flex flex-wrap gap-1"},_={key:1,class:"text-sm mt-2 text-gray-600 dark:text-gray-400 max-w-prose"},R=["innerHTML"],B={key:1,class:"pt-1"};function T(e,s,t,m,u,a){const h=p("ECFRSection",!0);return a.shouldHideItem?l("",!0):(i(),r("div",{key:0,class:n(["ecfr-section",[t.darkMode?"border-gray-600":"border-gray-200",t.level>0&&a.mergedOptions.display.indentItems?`pl-${Math.min(t.level*4,12)}`:"",a.mergedOptions.display.indentItems?"border-l-2":"",a.viewModeClasses,a.spacingClasses]])},[d("div",{class:n([a.mergedOptions.display.viewMode!=="styleless"?"flex items-start cursor-pointer p-2 hover:bg-opacity-10 transition-colors duration-200 rounded":"flex items-start cursor-pointer",a.mergedOptions.display.viewMode!=="styleless"&&a.isSelected?t.darkMode?"bg-blue-900 bg-opacity-20":"bg-blue-100":"",a.hasChildren?"group":"",a.mergedOptions.display.viewMode!=="styleless"?t.darkMode?"hover:bg-gray-700":"hover:bg-gray-100":""]),onClick:s[1]||(s[1]=(...c)=>a.handleSelect&&a.handleSelect(...c))},[a.hasChildren?(i(),r("div",{key:0,onClick:s[0]||(s[0]=M((...c)=>a.toggleExpand&&a.toggleExpand(...c),["stop"])),class:n(["mr-2 h-5 w-5 flex-shrink-0 mt-0.5 transition-transform duration-200",[a.isExpanded?"transform rotate-90":""]])},[(i(),r("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:n([[t.darkMode?"text-gray-400":"text-gray-500"],"h-5 w-5 group-hover:text-blue-500 transition-colors duration-200"])},s[2]||(s[2]=[d("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]),2))],2)):(i(),r("div",w)),d("div",V,[a.isDetailedMode?(i(),r("div",O,[d("div",P,[d("div",S,[t.item.number&&a.mergedOptions.display.showItemNumbers?(i(),r("span",{key:0,class:n(["font-semibold mr-2",[t.darkMode?"text-blue-300":"text-blue-600"]])},o(t.item.citationPrefix||t.item.type)+" "+o(t.item.number),3)):l("",!0),a.mergedOptions.display.showTypeIcon&&t.item.type?(i(),r("span",E,[t.item.type==="title"?(i(),r("svg",{key:0,class:n(["h-4 w-4 inline-block",[t.darkMode?"text-blue-300":"text-blue-600"]]),viewBox:"0 0 24 24"},s[6]||(s[6]=[d("path",{fill:"currentColor",d:"M5 4v3h5.5v12h3V7H19V4z"},null,-1)]),2)):t.item.type==="part"?(i(),r("svg",{key:1,class:n(["h-4 w-4 inline-block",[t.darkMode?"text-green-300":"text-green-600"]]),viewBox:"0 0 24 24"},s[7]||(s[7]=[d("path",{fill:"currentColor",d:"M14,10H2V12H14V10M14,6H2V8H14V6M2,16H10V14H2V16M21.5,11.5L23,13L16,20L11.5,15.5L13,14L16,17L21.5,11.5Z"},null,-1)]),2)):t.item.type==="section"?(i(),r("svg",{key:2,class:n(["h-4 w-4 inline-block",[t.darkMode?"text-amber-300":"text-amber-600"]]),viewBox:"0 0 24 24"},s[8]||(s[8]=[d("path",{fill:"currentColor",d:"M3,4H7V8H3V4M9,5V7H21V5H9M3,10H7V14H3V10M9,11V13H21V11H9M3,16H7V20H3V16M9,17V19H21V17H9"},null,-1)]),2)):l("",!0)])):l("",!0),d("span",{class:n(["font-medium",[t.darkMode?"text-gray-200":"text-gray-800"]])},o(t.item.title),3),a.hasMetadata&&a.mergedOptions.display.showMetadataBadges?(i(),r("div",L,[(i(!0),r(g,null,f(a.metadataTypes,c=>(i(),r("span",{key:c,class:n(["px-1.5 py-0.5 rounded text-xs",[t.darkMode?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-700"]])},o(c),3))),128))])):l("",!0)]),t.item.subtitle?(i(),r("div",{key:0,class:n(["text-sm mt-1",[t.darkMode?"text-gray-400":"text-gray-600"]])},o(t.item.subtitle),3)):l("",!0),a.mergedOptions.display.showDescription&&a.contentPreview?(i(),r("div",_,o(a.contentPreview),1)):l("",!0)])])):(i(),r(g,{key:0},[d("div",H,[t.item.number&&a.mergedOptions.display.showItemNumbers?(i(),r("span",{key:0,class:n(["font-semibold mr-2",[t.darkMode?"text-blue-300":"text-blue-600",a.isCompactMode?"text-xs":""]])},o(t.item.citationPrefix||t.item.type)+" "+o(t.item.number),3)):l("",!0),a.mergedOptions.display.showTypeIcon&&t.item.type&&!a.isCompactMode?(i(),r("span",C,[t.item.type==="title"?(i(),r("svg",{key:0,class:n(["h-4 w-4 inline-block",[t.darkMode?"text-blue-300":"text-blue-600"]]),viewBox:"0 0 24 24"},s[3]||(s[3]=[d("path",{fill:"currentColor",d:"M5 4v3h5.5v12h3V7H19V4z"},null,-1)]),2)):t.item.type==="part"?(i(),r("svg",{key:1,class:n(["h-4 w-4 inline-block",[t.darkMode?"text-green-300":"text-green-600"]]),viewBox:"0 0 24 24"},s[4]||(s[4]=[d("path",{fill:"currentColor",d:"M14,10H2V12H14V10M14,6H2V8H14V6M2,16H10V14H2V16M21.5,11.5L23,13L16,20L11.5,15.5L13,14L16,17L21.5,11.5Z"},null,-1)]),2)):t.item.type==="section"?(i(),r("svg",{key:2,class:n(["h-4 w-4 inline-block",[t.darkMode?"text-amber-300":"text-amber-600"]]),viewBox:"0 0 24 24"},s[5]||(s[5]=[d("path",{fill:"currentColor",d:"M3,4H7V8H3V4M9,5V7H21V5H9M3,10H7V14H3V10M9,11V13H21V11H9M3,16H7V20H3V16M9,17V19H21V17H9"},null,-1)]),2)):l("",!0)])):l("",!0),d("span",{class:n(["font-medium truncate",[t.darkMode?"text-gray-200":"text-gray-800",a.isCompactMode?"text-sm":""]])},o(a.displayTitle),3),a.hasMetadata&&a.mergedOptions.display.showMetadataBadges?(i(),r("span",{key:2,class:n(["ml-2 px-1.5 py-0.5 rounded text-xs",[t.darkMode?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-700"]])},o(a.metadataTypes.length),3)):l("",!0)]),t.item.subtitle&&!a.isCompactMode?(i(),r("div",{key:0,class:n(["text-sm mt-1",[t.darkMode?"text-gray-400":"text-gray-600"]])},o(t.item.subtitle),3)):l("",!0)],64))])],2),t.item.content&&(a.isExpanded||a.isSelected)?(i(),r("div",{key:0,class:n(["px-3 py-2 my-1 rounded",[t.darkMode?"bg-gray-800 text-gray-300":"bg-gray-50 text-gray-700"]])},[d("div",{class:"prose max-w-none text-sm",innerHTML:t.item.content},null,8,R)],2)):l("",!0),a.hasChildren&&a.isExpanded?(i(),r("div",B,[(i(!0),r(g,null,f(t.item.children,(c,x)=>(i(),v(h,{key:c.id,item:c,index:x,level:t.level+1,"parent-path":a.currentPath,"dark-mode":t.darkMode},null,8,["item","index","level","parent-path","dark-mode"]))),128))])):l("",!0)],2))}const N=k(y,[["render",T]]);y.__docgenInfo={displayName:"ECFRSection",exportName:"default",description:"",tags:{},props:[{name:"item",description:"The item to display",type:{name:"object"},required:!0},{name:"index",description:"The index of the item in its parent's children array",type:{name:"number"},required:!0},{name:"level",description:"The nesting level of the item",type:{name:"number"},required:!0},{name:"parentPath",description:"The path to the parent item",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"darkMode",description:"Whether to use dark mode",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"options",description:"Configuration options for the section",type:{name:"object"},defaultValue:{func:!1,value:"{}"}}],sourceFiles:["C:/Users/bradl/OneDrive/Documents/GitHub/bmc-navigator-component/src/components/ECFRSection.vue"]};export{N as E,I as u};
